# 菜单

为方便用户查看，Aha 实现了统一的入口菜单并提供注册方式。

目前的设计为：模块统一注册少量可触发的词条，然后由模块自行实现触发这些词条后的返回的功能菜单；当然也可以直接触发业务逻辑。

Aha 本体并不提供可供用户请求的获取菜单的业务逻辑。模块可[自行实现](#实现菜单)相关功能。

## 注册至菜单列表

通过 [`on_message`](../订阅与发布事件.md) 注册回调时，可通过其的 `register_help` 参数注册项目至菜单，其接受一个字典，键为可触发本回调的消息内容，值为对该功能的简介。

```python
from core.expr import Pmsg
from core.dispatcher import on_message

@on_message(r"\s*菜单\s*", register_help={"菜单": "查看菜单"})
async def _():
```

## 实现菜单

`core.dispatcher.help_items` 是一个列表，元素为具有三个元素的元组：

| 索引 | 类型 | 说明 |
| --- | --- | --- |
| 0 | str | 功能名称，也就是可触发回调的消息内容。 |
| 1 | [Expr](../../事件匹配表达式.md#基本概念) | 功能注册时的[事件匹配表达式](../../事件匹配表达式.md)，但剔除了 `PM.command`、`PM.message`、`PM.message_chain`、`PM.limit` 和 `PM.prefix` 字段。可用于验证该项目是否对用户有效。 |
| 2 | str \| None | 功能简介。 |

**[示例](https://github.com/Eric-Joker/Aha_Modules/blob/main/Aha/menu/__init__.py)**
