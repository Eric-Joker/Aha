# 经济系统

> 聊天机器人娱乐场景经常需要经济系统。Aha 提供了一个经济系统的基础支持。

## 函数

| 函数 | 返回值 |
| ---- | ------ |
| `services.point.inquiry_point` | 当前点数 Decimal |
| `services.point.adjust_point` | 调整后点数 Decimal |

## 示例

```python
from core.expr import Pmsg
from core.dispatcher import on_message
from models.api import Message
from services.point import adjust_point  # 调整点数
from services.point import inquiry_point  # 查询点数

@on_message("set 0")
async def _(event: Message):
    # 当前处于事件上下文中，自动视为事件触发用户。
    point = await inquiry_point()
    point = await adjust_point(event.platform, event.user_id, -point)  # 可以指定平台与用户
    await event.reply(f"当前点数：{point}")


from core.database import db_sessionmaker

@on_message(Pmsg == "+1")
async def _(event: Message):
    async with db_sessionmaker() as session:
        # 当前存在 Aha 数据库会话时可以传递
        point = await adjust_point(await event.user_aha_id(), 1, session=session) # 也可以用 Aha ID
        await session.commit()
    await event.reply(f"当前点数：{point}")
```
